<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMA Grade 12 Group 2 Research Survey</title>
    <link href="https://rawcdn.githack.com/teaphrog/research-STM-DGSTest/40c631012ff1c5a7bc8d8c5e446f52ec75d1324a/main-web/output.css" rel="stylesheet">
</head>

<script type="text/javascript"> // Transitions

    async function disappear(id) {
      document.getElementById(id).classList.toggle('disappear');
      
  }
    async function appear(id) {
      document.getElementById(id).classList.toggle('appear');
      
  }

    async function setInitPos(id) {
      document.getElementById(id).classList.toggle('setInitPos');
      
  }

    async function removeAppear(id) {
        document.getElementById(id).classList.remove('appear');
        
    }

    async function removeSetInitPos(id) {
        document.getElementById(id).classList.remove('setInitPos');
    }
</script>

<body class="bg-gray-100">
  
  <form id="form"></form>
  <form id="testAnswerSubmit"></form>
  <!--<div class="beegContainer mb-4 flex flex-wrap justify-center" id="beegContainer">-->
    <div id="formContainer0" class="formWindow active items-center h-full w-full">
      <div class="w-full bg-white rounded-xl shadow-lg p-8 m-4 md:max-w-lg md:mx-auto border">
        <h1 class="block w-full text-center text-grey-darkest font-semibold mb-6">Short-Term Memory Test & Sleep Questionnaire</h1>
        <div class="flex flex-wrap">
          <p class="text-grey-darkest mb-6">
            Dear Participant,
            <br><br>
            You are invited to take part in our research study investigating the potential relationship between sleep duration and short-term memory. Before proceeding, we would like to kindly ask for your consent on taking part in this survey.
            <br><br>
            This survey follows the <b>Data Privacy Republic Act of 2012(R.A. 10173)</b> which requires processing the data only of individuals that has given consent. The data we(the researchers), gather from the individuals in this survey, will strictly only be used for research purposes.
            <br><br>
            <b><u>Consent:</u><br>
            By clicking "I Agree", I have read and understood the information above, and voluntarily agree to participate in the study.</b>
            <br><br>
            <span class="text-gray-400 mb-6">If you have any questions or concerns about the study, please contact +63 9058241502</span>
          </p>
        </div>
        <div class="flex items-center mb-4">
          <input form="form" id="default-radio-1" type="radio" value="" name="Consent" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" onclick="setConsentAgree()">
          <label for="default-radio-1" class="ms-2 text-sm font-medium text-gray-900" >I Agree</label>
        </div>
        <div class="flex items-center mb-8">
            <input form="form" id="default-radio-2" type="radio" value="" name="Consent" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" onclick="setConsentDisagree()">
            <label for="default-radio-2" class="ms-2 text-sm font-medium text-gray-900">I Disagree</label>
        </div>
        <div>
          <label for="participantName"><b><u>Name:</b></u> </label>
        </div>
        <div>
          <input form="form" class="border-2 border-slate-200 rounded-md py-3 px-2 text-center focus:outline-slate-300 font-comfortaa text-xl mb-4" id="participantName" name="Name" autocomplete="off"/>
        </div>
          <div class="float-left"><button class="px-3 py-1 rounded-lg mx-auto border hover:bg-slate-200 nextBtn0" type="button" form="form">Next</button></div>
          <div class="float-right"><p class="py-1 text-grey-darkest">(1/3)</p></div>
      </div>
    </div>
    <div id="formContainer1" class="formWindow items-center h-full w-full justify-center">
      <div class="w-full bg-white rounded-xl shadow-lg p-8 m-4 md:max-w-lg md:mx-auto border">
        <h1 class="block w-full text-center text-grey-darkest font-semibold mb-6">Sleep Report Questionnaire</h1>
        <div class="flex flex-wrap">
          <p class="text-grey-darkest font-semibold mb-4">
            Sex
          </p>
        </div>
        <div class="flex items-center mb-4">
          <input id="mButton"  onclick="setSexM()" form="form" type="radio" value="" name="Sex" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
          <label for="mButton" class="ms-2 text-sm font-medium text-gray-900">Male</label>
        </div>
        <div class="flex items-center mb-9">
            <input id="fButton"  onclick="setSexF()" form="form" type="radio" value="" name="Sex" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            <label for="fButton" class="ms-2 text-sm font-medium text-gray-900">Female</label>
        </div>

        <div>
          <p class="text-grey-darkest font-semibold mb-4">Age:</p>
        </div>
        <div class="mb-9">
          <input form="form" class="border-2 rounded-md py-3 text-center focus:outline-slate-300 font-comfortaa text-lg mb-4" id="Age" type="number" name="Age" autocomplete="off"/>
        </div>

        <div class="flex flex-wrap">
          <p class="text-grey-darkest font-semibold mb-4">
            Strand
          </p>
        </div>
        <div class="flex items-center mb-4">
          <input id="default-radio-3"  onclick="setStrandGAS()" form="form" type="radio" value="" name="Strand" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
          <label for="default-radio-3" class="ms-2 text-sm font-medium text-gray-900">General Academic Strand(GAS)</label>
        </div>
        <div class="flex items-center mb-4">
            <input id="default-radio-4"  onclick="setStrandHUMSS()" form="form" type="radio" value="" name="Strand" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            <label for="default-radio-4" class="ms-2 text-sm font-medium text-gray-900">Humanities and Social Sciences(HUMSS)</label>
        </div>
        <div class="flex items-center mb-9">
            <input id="default-radio-5"  onclick="setStrandSTEM()" form="form" type="radio" value="" name="Strand" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offsaet-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
            <label for="default-radio-5" class="ms-2 text-sm font-medium text-gray-900">Science, Technology, Engineering, and Mathematics(STEM)</label>
        </div>
        <div class="flex flex-wrap">
          <p class="text-grey-darkest font-semibold mb-4">
            How many hours of sleep on a daily basis do you get on average?
          </p>
        </div>
        <div class="flex items-center mb-9">
          <select form="form" id="DailyAvgSleepDuration" name="Daily Reported Average Sleep Duration" class= "ms-2 text-sm font-medium text-gray-900 border-2 rounded px-2.5 py-2.5">
            <option style='display:none' value=""></option>
            <option value="1-2">1-2 hours</option>
            <option value="2-4">2-4 hours</option>
            <option value="4-6">4-6 hours</option>
            <option value="6-8">6-8 hours</option>
            <option value="8-10">8-10 hours</option>
            <option value="10+">more than 10 hours</option>
          </select>
        </div>
      <div class="flex flex-wrap">
          <p class="text-grey-darkest font-semibold mb-4">
            How many hours of sleep did you get last night?
          </p>
        <div class="flex items-center mb-9">
          <select form="form" id="ReportedSleepDuration" name="Reported Sleep Duration(Yesterday)" class= "ms-2 text-sm font-medium text-gray-900 border-2 rounded px-2.5 py-2.5">
            <option style='display:none' value=""></option>
            <option value="1-2">less than an hour</option>
            <option value="1-2">1-2 hours</option>
            <option value="2-4">2-4 hours</option>
            <option value="4-6">4-6 hours</option>
            <option value="6-8">6-8 hours</option>
            <option value="8-10">8-10 hours</option>
            <option value="10+">more than 10 hours</option>
          </select>
        </div>

        <p class="text-grey-darkest font-semibold mb-4">
          On a 1-7 scale, what do you rate your quality of sleep last night?
        </p>
        
        <div class="flex items-center">
          <div class="flex items-center likert scaleContainer ms-2" style="background:#ff7480;"></div>
          <p class="ms-2">- Very Dissatisfied</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#ff8b94;"></div>
          <p class="ms-2">- Dissatisfied</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#ffaaa5;"></div>
          <p class="ms-2">- Slightly Dissatisfied</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#ffd3b6;"></div>
          <p class="ms-2">- Neutral</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#dcedc1;"></div>
          <p class="ms-2">- Slightly Satisfied</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#a8e6cf;"></div>
          <p class="ms-2">- Satisfied</p>
        </div>
        <div class="flex items-center w-full">
          <div class="flex items-center likert scaleContainer ms-2 w-full" style="background:#84e3c8;"></div>
          <p class="ms-2">- Very Satisfied</p>
        </div>
        <div class="flex items-center likert mt-8 mb-8 w-full justify-center">
          <label><p class="text-center">1</p><input id="likertVal1" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue1()"/><span style="background:#ff7480;"></span></label>
          <label><p class="text-center">2</p><input id="likertVal2" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue2()"/><span style="background:#ff8b94;"></span></label>
          <label><p class="text-center">3</p><input id="likertVal3" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue3()"/><span style="background:#ffaaa5;"></span></label>
          <label><p class="text-center">4</p><input id="likertVal4" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue4()"/><span style="background:#ffd3b6;"></span></label>
          <label><p class="text-center">5</p><input id="likertVal5" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue5()"/><span style="background:#dcedc1;"></span></label>
          <label><p class="text-center">6</p><input id="likertVal6" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue6()"/><span style="background:#a8e6cf;"></span></label>
          <label><p class="text-center">7</p><input id="likertVal7" form="form" name="Yesterday Sleep Rating(Likert's Scale)" type="radio" value="" onclick="setLikertValue7()"/><span style="background:#84e3c8;"></span></label>
        </div>
      </div>
          <div class="float-left"><button class="px-3 py-1 rounded-lg mx-auto border hover:bg-slate-200 nextBtn1" type="button">Proceed to Memory Test</button></div>
          <div class="float-right"><p class="py-1 text-grey-darkest">(2/3)</p></div> 
      </div>
    </div>
    <div id="clickArea" class="memTestHide overflow-auto" onclick="hideTestResult()"></div>
    <div id="formContainer2" class="formWindow items-center h-full w-full">     
      <div class="w-full bg-white rounded-xl shadow-lg p-8 m-4 md:mx-5 border" style="">
        <div id="testTitle" class="flex flex-wrap justify-center setInitOpacity">
          <h1 class="w-full text-center text-4xl text-grey-darkest font-comfortaa font-medium">Short-Term Memory Test<br>(Modified Digit Span Test)</h1>
        </div>
        <div id="testContainer" class="flex h-full w-full testMargin">
          <div id="memTestHome" class="grid justify-center h-full w-full">
            <div id="testDesc" class="setInitTestDescPos">
              <h2 class="text-center text-grey-darkest font-semibold mb-4 text-lg">How many numbers can you remember?</h2>
            </div>
            <div id="startTest" class="flex w-full justify-center setInitOpacity">
              <button id="startBtn" class="px-3 py-1 rounded-lg mx-auto border hover:bg-slate-200 text-xl shadow" type="button">Start Test</button>
            </div>
          </div>
          <div id="memTestMain" class="memTestHide w-full justify-center">
            <div id="timerContainer" class="flex flex-wrap justify-center text-center" style="">
              <h1 id="numberSpanDisplay" class="font-comfortaa text-6xl text-center mb-6 w-full" 
              style=    
              "
              word-break: break-word;
              overflow-wrap:break-word;
              -webkit-touch-callout: none;
              -webkit-user-select: none;
              -khtml-user-select: none;
              -moz-user-select: none;
              -ms-user-select: none;
              user-select: none;"></h1>
              <g id="timer" class="timer memTestHide justify-center">
                <svg width="160" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1">
                  <line x1="40" x2="120" y1="10" y2="10" stroke="#DBDBDB" stroke-width="8"/>
                  <path
                    id="timerPath"
                    stroke-dasharray="80"
                    class="timerRemainingPath"
                    stroke="#B2B2B2"
                    d="
                      M 40, 10
                      L 120, 10
                    "
                  ></path>
                </svg>
              </g>
            </div>
          </div>
          <div id="memTestAnswer" class="memTestHide w-full justify-center">
              <label for="testAnswer" class="font-comfortaa text-2xl text-center mb-4">What was the number?</label>
              <input form="testAnswerSubmit" class="border-2 border-slate-200 rounded-md py-3 px-2 text-center focus:outline-slate-300 font-comfortaa text-xl mb-4" type="number" id="testAnswer" name="testAnswer" autocomplete="off"/>
              <input class="px-3 py-1 rounded-lg mx-auto border hover:bg-slate-200 text-xl shadow" form="testAnswerSubmit" id="answerSubmit" type="submit"></input>
          </div>       
          <div id="memTestAnswerResult" class="memTestHide w-full justify-center text-center">
            
            <h1 class="font-comfortaa text-2xl text-center mb-3" id="answerResult">insertResultHere</h1>
            <h2 class="font-comfortaa text-lg text-center mb-2">Correct Answer: 
              <br><br>
              <span class="w-full text-center text-6xl text-grey-darkest font-comfortaa " id="answerCorrect"></span>
            </h2>
            <p class="mb-1">Your Answer: <span id="answerCurrent"></span></p>
            <p class="mb-4">Score: <span id="scoreCount"></span></p>
            <div id="clickNotif">
            <h1 class="font-comfortaa text-2xl text-center mb-3 text-gray-200" 
            style=    
            "-webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;">
            Click Anywhere to Continue</h1>
            </div>
            <input form="form" id="finalScore" name="Score" autocomplete="off"  hidden />
            <div><button class="memTestHide px-3 py-1 rounded-lg mx-auto border hover:bg-slate-200" type="submit" id="submit" form="form">Finish</button></div>
          </div>
      </div>
        <div class="float-right"><p class="py-1 text-right text-grey-darkest">(3/3)</p></div>
    </div>
    </div>

</body>

<script>// Buttons | Onclick Transition Callback | Page Change Actions
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwRH8UqWd7SUvGpmku7IhvfCZtoJwSQk_iP2OLYPw2Noq1W_EK2-B3_JDrefmF1s_Qk/exec'
    const form = document.querySelector('#form')
    const answerForm = document.getElementById('testAnswerSubmit')
    const answerGet = document.getElementById('testAnswer')
    const formSubmitBtn = document.getElementById('submit')
    const answerSubmit= document.getElementById('answerSubmit')
    const nextBtn0 = document.querySelectorAll('.nextBtn0')
    const nextBtn1 = document.querySelectorAll('.nextBtn1')
    const startBtn = document.querySelector('#startBtn')
    const formWindows = Array.from(document.querySelectorAll('.formWindow'))
    const active = document.querySelector('.formWindow.active')
    var answerCurrent
    var index = formWindows.indexOf(active)
    var indexAnim = index + 1
    //console.log(formWindows);

    startBtn.disabled = true
    formSubmitBtn.disabled = true

    function setConsentDisagree(){
      document.getElementById("default-radio-2").value="I Disagree"
    }

    function setConsentAgree(){
      document.getElementById("default-radio-1").value="I Agree"
      document.getElementById("default-radio-2").value=""
    }

    function setSexM(){
      document.getElementById("mButton").value="Male"
    }

    function setSexF(){
      document.getElementById("fButton").value="Female"
    }

    function setStrandGAS(){
      document.getElementById("default-radio-3").value="GAS"
    }
    function setStrandHUMSS(){
      document.getElementById("default-radio-4").value="HUMSS"
    }
    function setStrandSTEM(){
      document.getElementById("default-radio-5").value="STEM"
    }
    function setLikertValue1(){
      document.getElementById("likertVal1").value="1"
    }
    function setLikertValue2(){
      document.getElementById("likertVal2").value="2"
    }
    function setLikertValue3(){
      document.getElementById("likertVal3").value="3"
    }
    function setLikertValue4(){
      document.getElementById("likertVal4").value="4"
    }
    function setLikertValue5(){
      document.getElementById("likertVal5").value="5"
    }
    function setLikertValue6(){
      document.getElementById("likertVal6").value="6"
    }
    function setLikertValue7(){
      document.getElementById("likertVal7").value="7"
    }


    function textOpacityAnim(id){
      if(document.getElementById(id).classList.contains('active')){
        setTimeout(() => document.getElementById('testTitle').classList.toggle('appear'), 1200)
        setTimeout(() => document.getElementById('testDesc').classList.toggle('appear'), 1600)
        setTimeout(() => document.getElementById('startTest').classList.toggle('appear'), 2000)
        setTimeout(() => document.getElementById("numberSpanDisplay").innerHTML, 2000)
        setTimeout(() => startBtn.disabled = false, 2000)
        setTimeout(() => document.getElementById('formContainer2').classList.toggle('setInitPos'), 3000)
        setTimeout(() => document.getElementById('formContainer2').classList.toggle('appear'), 3001)
      }      
    }

    function toggle_visibility(id){
      document.getElementById(id).classList.toggle('active')
    }

    function nextForm(btn){
      //console.log(index)
      //console.log(indexAnim)
      if(btn === 'next'){
        index ++
      }
    }

    function hideTestResult(){
      document.getElementById('clickArea').classList.toggle('clickArea')
      //document.getElementById('clickNotif').classList.toggle('block')
      //document.getElementById('clickNotif').classList.toggle('appear')
      document.getElementById('memTestAnswerResult').classList.toggle('memTestAppear')
      setTimeout(() => document.getElementById('memTestMain').classList.toggle('memTestAppear'), 410)
      setTimeout(() => document.getElementById('timer').classList.toggle('memTestAppear'), 690)
      setTimeout(() => startTimerMeasure(), 590)     
      answerSubmit.disabled = false
    }

    function disappearFinal(id){
      document.getElementById(id).classList.add('disappearTest')
    }

    function startNextPageAnim(){
      removeAppear('formContainer' + index)
      disappear('formContainer'+ index)
        .then(() => setTimeout(() => toggle_visibility('formContainer' + index), 310))
        .then(() => setTimeout(() => nextForm('next'), 310))
        .then(() => removeSetInitPos('formContainer'+ index))
        .then(() => setInitPos('formContainer'+ indexAnim))
        .then(() => toggle_visibility('formContainer'+ indexAnim))
        .then(() => setTimeout(() => appear('formContainer'+ indexAnim), 310))
        .then(() => textOpacityAnim('formContainer2'))
      indexAnim = index + 1
    }

    function pageValueCheck(){
      if(document.getElementById("Age").value == ""){
            alert('Please Enter Your Age.');
        } else if(
          (
            document.getElementById("default-radio-3").value ||
            document.getElementById("default-radio-4").value ||
            document.getElementById("default-radio-5").value
          ) == ""
        ){
          alert('Please Select Your Strand.')
        } else if(document.getElementById("DailyAvgSleepDuration").value == ""){
            alert('Please Enter Daily Average Sleep Duration.')
        } else if(document.getElementById("ReportedSleepDuration").value == ""){
            alert('Please Enter The Duration of Your Sleep Last Night')
        } else if(
            (
              document.getElementById("likertVal1").value ||
              document.getElementById("likertVal2").value ||
              document.getElementById("likertVal3").value ||
              document.getElementById("likertVal4").value ||
              document.getElementById("likertVal5").value ||
              document.getElementById("likertVal6").value ||
              document.getElementById("likertVal7").value        
            ) == ""
          ){
              alert('Please Rate Your Sleep on A Scale of 1-7.')
        } 
        
        else{
            startNextPageAnim() 
        }
    }

    nextBtn0.forEach(button => {
      button.addEventListener('click', (e) => {
        if(
          document.getElementById("default-radio-2").value == "I Disagree" ||
          document.getElementById("default-radio-1").value == ""
        ){
          alert('Please Select "I Agree" to Continue.')
          document.getElementById("default-radio-2").value=""
        } else if(document.getElementById("participantName").value == ""){
            alert('Please Enter Your Name.')
        } else{
            startNextPageAnim() 
        }


      })
    });

    nextBtn1.forEach(button => {
      button.addEventListener('click', (e) => {
        if(
          (
            document.getElementById("mButton").value ||
            document.getElementById("fButton").value
          != ""
          )
        ){
          pageValueCheck()
        } else 
          alert('Please select your sex.');

      })
    });

    startBtn.addEventListener('click', (e) => {
      document.getElementById('memTestHome').classList.toggle('disappearTest')
      setTimeout(() => document.getElementById('memTestHome').classList.toggle('memTestHide'), 310)
      setTimeout(() => document.getElementById('memTestMain').classList.toggle('memTestAppear'), 410)
      setTimeout(() => document.getElementById('numberSpanDisplay').innerHTML = numberDisplay, 690)
      setTimeout(() => document.getElementById('timer').classList.toggle('memTestAppear'), 690)
      setTimeout(() => startTimerMeasure(), 590)
    })


    answerForm.addEventListener('submit', (e) =>{
      e.preventDefault()
      answerSubmit.disabled = true
      var answerCurrentLocal = new FormData(answerForm)
      answerCurrent = answerCurrentLocal.get('testAnswer')
      
      if(!answerCurrent){
        alert("Please Enter a Value.");
        answerSubmit.disabled = false
      } else{
        answerChecking()
        document.getElementById('memTestAnswer').classList.toggle('disappearTest')
        document.getElementById('answerResult').innerHTML = answerResult
        document.getElementById('scoreCount').innerHTML = score
        document.getElementById('answerCorrect').innerHTML = answerCorrect
        document.getElementById('answerCurrent').innerHTML = answerCurrent
        setTimeout(() => document.getElementById('memTestAnswer').classList.toggle('memTestAppear'), 310)
        setTimeout(() => document.getElementById('memTestAnswer').classList.toggle('disappearTest'), 310)
        setTimeout(() => document.getElementById('memTestAnswerResult').classList.toggle('memTestAppear'), 410)
      }
      
      //console.log(answerCurrent)
    })


    
    form.addEventListener('submit', e => {
      //console.log("it work")
      e.preventDefault()
      formSubmitBtn.disabled = true
      formSubmitBtn.innerHTML = "Loading..."
      //console.log(form)
      
      fetch(scriptURL, { method: 'POST', body: new FormData(form) })
        .then(response => { 
          formSubmitBtn.disabled = false
          formSubmitBtn.innerHTML = "Submit"
            alert('Response Submitted! Thank you for answering the survey.', response)
            
            .then(() => setTimeout(() => toggle_visibility('formContainer2'), 310))
          })
        
        .catch(error => {
          formSubmitBtn.disabled = false
          formSubmitBtn.innerHTML = "Done!"
          disappearFinal('formContainer2')
        })
          
    })
</script>
<script>// High res timer library
  class Timer {
  constructor () {
    this.isRunning = false;
    this.startTime = 0;
    this.overallTime = 0;
  }

  _getTimeElapsedSinceLastStart () {
    if (!this.startTime) {
      return 0;
    }
  
    return Date.now() - this.startTime;
  }

  start () {
    if (this.isRunning) {
      return console.error('Timer is already running');
    }

    this.isRunning = true;

    this.startTime = Date.now();
  }

  stop () {
    if (!this.isRunning) {
      return console.error('Timer is already stopped');
    }

    this.isRunning = false;

    this.overallTime = this.overallTime + this._getTimeElapsedSinceLastStart();
  }

  reset () {
    this.overallTime = 0;

    if (this.isRunning) {
      this.startTime = Date.now();
      return;
    }

    this.startTime = 0;
  }

  getTime () {
    if (!this.startTime) {
      return 0;
    }

    if (this.isRunning) {
      return this.overallTime + this._getTimeElapsedSinceLastStart();
    }

    return this.overallTime;
  }
}
  
  
  
</script>
<script>// Timer
  var TIME_LIMIT = 2000;
  var TIME_LIMIT_MULTIPLIER = 0;
  var TIME_LIMIT_PREV = 0;
  var TIMER_CAP = 0;
  const FULL_DASH_ARRAY = 80;
  const timer = new Timer();
  let timeLeft = TIME_LIMIT;
  let timerInterval = null;
  



  function startTimerMeasure() {
    timer.start(); 
    timerInterval = setInterval(() => {
      let timePassed = Math.round(timer.getTime());
      timeLeft = TIME_LIMIT - timePassed; 
      setLineDasharray()
      if(setLineDasharray('done')){
        clearInterval(timerInterval)
        setTimeout(() => timer.stop(), 0.5)  
        setTimeout(() => document.getElementById('memTestMain').classList.toggle('memTestAppear'), 0.5)
        setTimeout(() => document.getElementById('memTestAnswer').classList.toggle('memTestAppear'), 0.5)
        setTimeout(() => document.getElementById('testAnswer').focus(), 0.5)
        setTimeout(() => document.getElementById('timer').classList.toggle('memTestAppear'), 0.5)
        timer.reset()
        timeLeft = TIME_LIMIT
        setLineDasharray()
      }
    }, 1);//cpu benchmark(real)
  }

  // Divides time left by the defined time limit.
  function calculateTimeFraction() {
    const rawTimeFraction = timeLeft / TIME_LIMIT;
    return rawTimeFraction;
  }
      
  // Update the dasharray value as time passes, starting with 283
  function setLineDasharray() {
    const timeFractionCallback = calculateTimeFraction() * FULL_DASH_ARRAY
    const lineDasharray = `${(calculateTimeFraction() * FULL_DASH_ARRAY).toFixed(0)} 80`;
    document.getElementById("timerPath").setAttribute("stroke-dasharray", lineDasharray);
    //console.log(calculateTimeFraction('rawTimeFraction'))
    //console.log(lineDasharray)
    if(timeFractionCallback <= 0){
      return 'done'
    }
  }

</script>
<script>
    var randNum = Math.floor(Math.random() * 10) //intial value in numberStorage
    var numberStorage = [randNum] //numberStorage == is the Array
    var numberDisplay = numberStorage.join('') //convert array values to string
    var answerCorrect = numberDisplay //yes
    var score = 0 //yes2
    var digitCount = numberStorage.length //count number of values in array
    var answerResult

    
  function answerChecking(){
    if(answerCurrent == answerCorrect){
      for(let i = 0; i < digitCount + 1; i++){
          numberStorage[i] = Math.floor(Math.random() * 10)
        }
      answerResult = "Correct!!"
      score += 1
      digitCount += 1
      numberDisplay = numberStorage.join('')
      document.getElementById('numberSpanDisplay').innerHTML = numberDisplay
      //setTimeout(() => document.getElementById('clickNotif').classList.toggle('block'), 410)
      //setTimeout(() => document.getElementById('clickNotif').classList.toggle('appear'), 100)
      setTimeout(() => document.getElementById('clickArea').classList.toggle('clickArea'), 100)
      setTimeout(() => answerCorrect = numberDisplay, 100)
      document.getElementById('testAnswer').value = ""
      TIME_LIMIT_MULTIPLIER += 1
      TIMER_CAP = TIME_LIMIT_MULTIPLIER
      TIME_LIMIT_PREV = TIME_LIMIT
      if(TIMER_CAP > 12){
        TIME_LIMIT = 15000
      } else {
        TIME_LIMIT = (2000 * (1.7**((Math.log10(1.4)*(TIME_LIMIT_MULTIPLIER - 1)))))*(1.7**((Math.log10(1.4)*TIME_LIMIT_MULTIPLIER)))
      }      
      //console.log(TIME_LIMIT_MULTIPLIER)
      console.log(TIME_LIMIT)
      
    } else {
        answerResult = "Incorrect :("
        formSubmitBtn.disabled = false
        document.getElementById('clickNotif').classList.toggle('memTestHide')
        document.getElementById('submit').classList.toggle('memTestAppear')
    }
      document.getElementById('finalScore').setAttribute('value', score)  
      //console.log(numberDisplay)
      //console.log(numberStorage)
      //console.log(score)
      

      
  }

</script>
</html>


